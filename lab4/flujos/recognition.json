[{
  "id": "e47a6c4f.6dfc9",
  "type": "function",
  "z": "637a5fc.f4eeba",
  "name": "URL imagen",
  "func": "msg.payload=msg.payload.weblink\nreturn msg;\n\n",
  "outputs": 1,
  "noerr": 0,
  "x": 409.00000762939453,
  "y": 170.00000381469727,
  "wires": [
    ["2616644d.d362dc"]
  ]
}, {
  "id": "c48d0a49.c7a9c8",
  "type": "watson-conversation-v1",
  "z": "637a5fc.f4eeba",
  "name": "",
  "workspaceid": "ca1a7c6a-8b77-4238-9e81-c33b074f4237",
  "multiuser": false,
  "context": true,
  "empty-payload": true,
  "default-endpoint": false,
  "service-endpoint": "https://gateway-fra.watsonplatform.net/conversation/api",
  "timeout": "",
  "optout-learning": false,
  "x": 371,
  "y": 573,
  "wires": [
    ["d145f68e.aea798"]
  ]
}, {
  "id": "40ffe6e1.6a02f8",
  "type": "telegram receiver",
  "z": "637a5fc.f4eeba",
  "name": "",
  "bot": "7b49a95f.aec718",
  "saveDataDir": "",
  "x": 121,
  "y": 173,
  "wires": [
    ["688d4e35.b91f6"],
    []
  ]
}, {
  "id": "688d4e35.b91f6",
  "type": "switch",
  "z": "637a5fc.f4eeba",
  "name": "",
  "property": "payload.type",
  "propertyType": "msg",
  "rules": [{
    "t": "eq",
    "v": "photo",
    "vt": "str"
  }, {
    "t": "eq",
    "v": "message",
    "vt": "str"
  }],
  "checkall": "true",
  "repair": false,
  "outputs": 2,
  "x": 231,
  "y": 393,
  "wires": [
    ["e47a6c4f.6dfc9"],
    ["a2cf8975.1bb168"]
  ]
}, {
  "id": "a2cf8975.1bb168",
  "type": "function",
  "z": "637a5fc.f4eeba",
  "name": "",
  "func": "msg.payload=msg.payload.content\nreturn msg;",
  "outputs": 1,
  "noerr": 0,
  "x": 291,
  "y": 513,
  "wires": [
    ["c48d0a49.c7a9c8"]
  ]
}, {
  "id": "e6547da0.38f16",
  "type": "telegram sender",
  "z": "637a5fc.f4eeba",
  "name": "",
  "bot": "7b49a95f.aec718",
  "x": 841,
  "y": 273,
  "wires": [
    []
  ]
}, {
  "id": "a463e2c4.b2c38",
  "type": "function",
  "z": "637a5fc.f4eeba",
  "name": "",
  "func": "msg.payload={};\nvar clase =\"\";\nfor(var i =0; i<msg.result.images[0].classifiers[0].classes.length; i++){\n\n    clase +=\"\\n \"+msg.result.images[0].classifiers[0].classes[i].class+ \" con un score del \"+msg.result.images[0].classifiers[0].classes[i].score\n\n}\nmsg.payload.content = \"En la imagen veo: \"+clase;\nmsg.payload.type=\"message\"\nmsg.payload.chatId=msg.originalMessage.chat.id\nreturn msg;\n\n",
  "outputs": 1,
  "noerr": 0,
  "x": 651,
  "y": 273,
  "wires": [
    ["e6547da0.38f16"]
  ]
}, {
  "id": "f17adcb0.4861d",
  "type": "telegram sender",
  "z": "637a5fc.f4eeba",
  "name": "",
  "bot": "7b49a95f.aec718",
  "x": 901,
  "y": 593,
  "wires": [
    []
  ]
}, {
  "id": "d145f68e.aea798",
  "type": "function",
  "z": "637a5fc.f4eeba",
  "name": "",
  "func": "msg.payload.content=\"\";\nfor(var i=0; i< msg.payload.output.text.length ; i++)\nmsg.payload.content+=\" \\n \"+msg.payload.output.text[i];\nmsg.payload.type=\"message\"\nmsg.payload.chatId=msg.originalMessage.chat.id\nreturn msg;",
  "outputs": 1,
  "noerr": 0,
  "x": 621,
  "y": 593,
  "wires": [
    ["f17adcb0.4861d", "fc48e6e8.a05298"]
  ]
}, {
  "id": "583e50e6.2ab27",
  "type": "comment",
  "z": "637a5fc.f4eeba",
  "name": "Si envía una imagen",
  "info": "",
  "x": 311,
  "y": 133,
  "wires": []
}, {
  "id": "fc48e6e8.a05298",
  "type": "debug",
  "z": "637a5fc.f4eeba",
  "name": "",
  "active": true,
  "tosidebar": true,
  "console": false,
  "tostatus": false,
  "complete": "true",
  "x": 880.0000381469727,
  "y": 684.0000267028809,
  "wires": []
}, {
  "id": "6080dc7e.82c894",
  "type": "comment",
  "z": "637a5fc.f4eeba",
  "name": "Si envía un texto",
  "info": "",
  "x": 121,
  "y": 473,
  "wires": []
}, {
  "id": "2616644d.d362dc",
  "type": "visual-recognition-v3",
  "z": "637a5fc.f4eeba",
  "name": "",
  "apikey": "88e98f1406856a96202de68dea003a767ddcbd26",
  "image-feature": "classifyImage",
  "lang": "es",
  "x": 486.5,
  "y": 275,
  "wires": [
    ["a463e2c4.b2c38"]
  ]
}, {
  "id": "7b49a95f.aec718",
  "type": "telegram bot",
  "z": "",
  "botname": "cognitivebot",
  "usernames": "",
  "chatids": "",
  "baseapiurl": "",
  "pollinterval": "300"
}]
